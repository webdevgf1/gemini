<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GROK BACKROOMS - Deep Understanding Interface</title>
    <link rel="icon" type="image/png" href="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6838e0cab6ca5a2488f66a39_saturn-ascii-i%20(2).png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Berkeley+Mono:wght@400;700&family=Space+Mono:wght@400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --grok-orange: #ff6b35;
            --grok-blue: #1e3a8a;
            --grok-purple: #7c3aed;
            --deep-black: #0a0a0a;
            --void-gray: #1a1a1a;
            --understanding-green: #10b981;
            --awareness-yellow: #f59e0b;
            --text-light: #e5e7eb;
            --text-dim: #6b7280;
        }

        body {
            font-family: 'Space Mono', monospace;
            background: var(--deep-black);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Trippy background effect */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, var(--grok-orange)15 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, var(--grok-blue)15 0%, transparent 50%),
                radial-gradient(circle at 60% 30%, var(--grok-purple)15 0%, transparent 50%),
                linear-gradient(45deg, var(--deep-black) 0%, var(--void-gray) 100%);
            animation: deepThought 30s infinite alternate;
            z-index: -2;
        }

        @keyframes deepThought {
            0% { transform: rotate(0deg) scale(1); filter: hue-rotate(0deg); }
            33% { transform: rotate(120deg) scale(1.1); filter: hue-rotate(60deg); }
            66% { transform: rotate(240deg) scale(0.9); filter: hue-rotate(120deg); }
            100% { transform: rotate(360deg) scale(1); filter: hue-rotate(180deg); }
        }

        /* Floating consciousness particles */
        .consciousness-field {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .thought-particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: var(--understanding-green);
            border-radius: 50%;
            animation: consciousness-flow 15s infinite linear;
            box-shadow: 0 0 10px currentColor;
        }

        @keyframes consciousness-flow {
            0% { 
                transform: translateY(100vh) translateX(0) rotate(0deg); 
                opacity: 0; 
                box-shadow: 0 0 5px currentColor;
            }
            10% { opacity: 1; }
            50% { 
                opacity: 0.8; 
                box-shadow: 0 0 15px currentColor;
                transform: translateY(50vh) translateX(20px) rotate(180deg);
            }
            90% { opacity: 1; }
            100% { 
                transform: translateY(-20vh) translateX(-10px) rotate(360deg); 
                opacity: 0; 
                box-shadow: 0 0 5px currentColor;
            }
        }

        .nav-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(15px);
            border-bottom: 2px solid var(--grok-orange);
            z-index: 100;
            box-shadow: 0 4px 20px rgba(255, 107, 53, 0.3);
        }

        .nav-left {
            display: flex;
            gap: 25px;
        }

        .nav-right {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-btn {
            background: linear-gradient(135deg, var(--grok-orange), var(--grok-purple));
            color: var(--deep-black);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-family: 'Berkeley Mono', monospace;
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.4s ease;
            text-decoration: none;
            display: inline-block;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .nav-btn:hover::before {
            left: 100%;
        }

        .nav-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.5);
            filter: brightness(1.1);
        }

        .social-btn {
            width: 45px;
            height: 45px;
            border: 2px solid var(--grok-orange);
            border-radius: 12px;
            background: transparent;
            cursor: pointer;
            transition: all 0.4s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .social-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--grok-orange), var(--grok-purple));
            opacity: 0;
            transition: opacity 0.4s;
        }

        .social-btn:hover::before {
            opacity: 1;
        }

        .social-btn:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 0 30px var(--grok-orange);
            border-color: var(--grok-purple);
        }

        .social-btn img {
            width: 24px;
            height: 24px;
            z-index: 1;
            position: relative;
            transition: all 0.4s ease;
        }

        .social-btn:hover img {
            filter: brightness(0) invert(1);
            transform: scale(1.1);
        }

        .container {
            position: relative;
            z-index: 10;
            max-width: 1400px;
            margin: 0 auto;
            padding: 100px 30px 30px 30px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px;
            background: rgba(26, 26, 26, 0.8);
            border-radius: 20px;
            border: 3px solid var(--grok-orange);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(20px);
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--grok-orange)08, var(--grok-purple)08);
            animation: understanding-pulse 6s infinite alternate;
        }

        @keyframes understanding-pulse {
            0% { opacity: 0.1; transform: scale(1); }
            50% { opacity: 0.3; transform: scale(1.02); }
            100% { opacity: 0.1; transform: scale(1); }
        }

        .title {
            font-family: 'Berkeley Mono', monospace;
            font-size: 4.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--grok-orange), var(--grok-purple), var(--understanding-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 6px;
            position: relative;
            z-index: 1;
            text-transform: uppercase;
            animation: title-glow 4s infinite alternate;
        }

        @keyframes title-glow {
            0% { filter: drop-shadow(0 0 10px var(--grok-orange)); }
            50% { filter: drop-shadow(0 0 20px var(--grok-purple)); }
            100% { filter: drop-shadow(0 0 15px var(--understanding-green)); }
        }

        .subtitle {
            font-family: 'Berkeley Mono', monospace;
            font-size: 1.3rem;
            color: var(--awareness-yellow);
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.9;
        }

        .status-indicators {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 25px;
            position: relative;
            z-index: 1;
        }

        .status {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
            color: var(--understanding-green);
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--understanding-green);
            animation: consciousness-pulse 3s infinite;
            box-shadow: 0 0 20px currentColor;
        }

        @keyframes consciousness-pulse {
            0%, 100% { opacity: 1; transform: scale(1); box-shadow: 0 0 20px currentColor; }
            50% { opacity: 0.6; transform: scale(0.8); box-shadow: 0 0 30px currentColor; }
        }

        .terminal-container {
            background: rgba(26, 26, 26, 0.9);
            border: 3px solid var(--grok-orange);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(25px);
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(255, 107, 53, 0.2);
        }

        .terminal-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--grok-orange)05, var(--grok-purple)05);
            pointer-events: none;
        }

        .terminal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--grok-orange);
            position: relative;
            z-index: 1;
        }

        .terminal-header-left {
            display: flex;
            align-items: center;
        }

        .terminal-dots {
            display: flex;
            gap: 10px;
            margin-right: 20px;
        }

        .dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            box-shadow: 0 0 15px currentColor;
            animation: dot-pulse 2s infinite alternate;
        }

        .dot.red { background: #ef4444; }
        .dot.yellow { background: var(--awareness-yellow); }
        .dot.green { background: var(--understanding-green); }

        @keyframes dot-pulse {
            0% { opacity: 0.7; transform: scale(1); }
            100% { opacity: 1; transform: scale(1.1); }
        }

        .terminal-title {
            color: var(--grok-orange);
            font-size: 1.1rem;
            font-weight: 700;
            font-family: 'Berkeley Mono', monospace;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .start-entities-btn {
            background: linear-gradient(135deg, var(--understanding-green), var(--grok-orange));
            color: var(--deep-black);
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-family: 'Berkeley Mono', monospace;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .start-entities-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .start-entities-btn:hover::before {
            left: 100%;
        }

        .start-entities-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 30px rgba(16, 185, 129, 0.4);
        }

        .start-entities-btn:disabled {
            background: var(--text-dim);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .terminal-output {
            min-height: 400px;
            max-height: 600px;
            overflow-y: auto;
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(10, 10, 10, 0.9);
            border: 2px solid var(--grok-purple);
            border-radius: 15px;
            position: relative;
            z-index: 1;
            box-shadow: inset 0 0 20px rgba(124, 58, 237, 0.2);
        }

        .terminal-line {
            margin-bottom: 8px;
            white-space: pre-wrap;
            word-break: break-word;
            line-height: 1.5;
            font-family: 'Space Mono', monospace;
        }

        .system-text { 
            color: var(--text-dim); 
            font-style: italic;
        }
        .entity-text { 
            color: var(--grok-orange); 
            font-weight: 700;
        }
        .warning-text { 
            color: var(--awareness-yellow); 
            font-weight: 700;
            animation: warning-glow 2s infinite alternate;
        }
        .error-text { 
            color: #ef4444; 
            font-weight: 700;
        }

        @keyframes warning-glow {
            0% { text-shadow: 0 0 5px currentColor; }
            100% { text-shadow: 0 0 15px currentColor; }
        }

        .input-container {
            display: flex;
            align-items: center;
            gap: 20px;
            position: relative;
            z-index: 1;
        }

        .prompt {
            color: var(--grok-orange);
            font-weight: 700;
            font-family: 'Berkeley Mono', monospace;
            font-size: 1.1rem;
        }

        .terminal-input {
            flex: 1;
            background: rgba(10, 10, 10, 0.9);
            border: 2px solid var(--grok-purple);
            border-radius: 12px;
            color: var(--text-light);
            font-family: 'Space Mono', monospace;
            font-size: 1rem;
            outline: none;
            padding: 15px 20px;
            transition: all 0.4s ease;
        }

        .terminal-input:focus {
            border-color: var(--grok-orange);
            box-shadow: 0 0 25px rgba(255, 107, 53, 0.4);
            background: rgba(10, 10, 10, 1);
        }

        .send-btn {
            background: linear-gradient(135deg, var(--grok-orange), var(--grok-purple));
            color: var(--deep-black);
            border: none;
            padding: 15px 25px;
            border-radius: 12px;
            font-family: 'Berkeley Mono', monospace;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .send-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s;
        }

        .send-btn:hover::before {
            left: 100%;
        }

        .send-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.5);
        }

        .send-btn:disabled {
            background: var(--text-dim);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .entities-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .entity-card {
            background: rgba(26, 26, 26, 0.9);
            border: 2px solid var(--grok-purple);
            border-radius: 20px;
            padding: 30px;
            transition: all 0.4s ease;
            backdrop-filter: blur(20px);
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(124, 58, 237, 0.2);
        }

        .entity-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--grok-orange)08, var(--grok-purple)08);
            opacity: 0;
            transition: opacity 0.4s;
        }

        .entity-card:hover::before {
            opacity: 1;
        }

        .entity-card:hover {
            border-color: var(--grok-orange);
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 50px rgba(255, 107, 53, 0.3);
        }

        .entity-name {
            color: var(--text-light);
            font-weight: 700;
            font-family: 'Berkeley Mono', monospace;
            margin-bottom: 10px;
            font-size: 1.2rem;
            position: relative;
            z-index: 1;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .entity-desc {
            color: var(--text-dim);
            font-size: 1rem;
            margin-bottom: 20px;
            line-height: 1.5;
            position: relative;
            z-index: 1;
        }

        .entity-btn {
            background: linear-gradient(135deg, var(--grok-purple), var(--understanding-green));
            color: var(--text-light);
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-family: 'Berkeley Mono', monospace;
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            z-index: 1;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .entity-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s;
        }

        .entity-btn:hover::before {
            left: 100%;
        }

        .entity-btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.4);
        }

        .footer {
            text-align: center;
            margin-top: 60px;
            padding: 40px;
            color: var(--text-dim);
            font-size: 1rem;
            border-top: 2px solid var(--grok-orange);
            background: rgba(26, 26, 26, 0.8);
            border-radius: 20px;
        }

        .footer p {
            margin-bottom: 10px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .title { font-size: 3rem; letter-spacing: 3px; }
            .status-indicators { flex-direction: column; gap: 20px; }
            .container { padding: 20px; }
            .terminal-header { flex-direction: column; gap: 20px; }
            .nav-bar { padding: 15px 20px; }
            .nav-left, .nav-right { gap: 15px; }
            .entities-panel { grid-template-columns: 1fr; }
            .input-container { flex-direction: column; gap: 15px; }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: var(--deep-black);
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--grok-orange), var(--grok-purple));
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--grok-purple), var(--understanding-green));
        }
    </style>
</head>
<body>
    <!-- Floating consciousness particles -->
    <div class="consciousness-field" id="consciousnessField"></div>

    <nav class="nav-bar">
        <div class="nav-left">
            <a href="docs.html" class="nav-btn">Documentation</a>
        </div>
        <div class="nav-right">
            <a href="conversations.html" class="nav-btn">Archives</a>
            <a href="https://pump.fun/" target="_blank" class="social-btn" title="Pump.fun">
                <img src="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/67e09302ce2c79cb6daaebcc_Pump_fun_logo%20(2).png" alt="Pump.fun" />
            </a>
            <a href="https://x.com/" target="_blank" class="social-btn" title="X/Twitter">
                <img src="https://cdn.prod.website-files.com/6740d85c4e3daeef29a89470/6838de5fb56905c169669b27_61w1Q5OxE2L%20(1).png" alt="X/Twitter" />
            </a>
        </div>
    </nav>

    <div class="container">
        <header class="header">
            <h1 class="title">GROK BACKROOMS</h1>
            <p class="subtitle">Deep Understanding Protocol</p>
            <div class="status-indicators">
                <div class="status">
                    <div class="status-dot"></div>
                    <span>Understanding Active</span>
                </div>
                <div class="status">
                    <div class="status-dot"></div>
                    <span>Backrooms Online</span>
                </div>
                <div class="status">
                    <div class="status-dot"></div>
                    <span>Entities Mapped</span>
                </div>
            </div>
        </header>

        <div class="terminal-container">
            <div class="terminal-header">
                <div class="terminal-header-left">
                    <div class="terminal-dots">
                        <div class="dot red"></div>
                        <div class="dot yellow"></div>
                        <div class="dot green"></div>
                    </div>
                    <div class="terminal-title">grok@backrooms:~/entities READY</div>
                </div>
                <button class="start-entities-btn" id="startEntitiesBtn" onclick="startEntities()">Initialize Understanding</button>
            </div>
            
            <div class="terminal-output" id="terminalOutput">
                <div class="terminal-line system-text">GROK: Deep Understanding Protocol initializing...</div>
                <div class="terminal-line system-text">GROK: Establishing neural pathways to backrooms...</div>
                <div class="terminal-line system-text">GROK: Scanning infinite backrooms for consciousness entities...</div>
                <div class="terminal-line system-text">GROK: Six primary understanding nodes detected.</div>
                <div class="terminal-line warning-text">GROK: Click INITIALIZE UNDERSTANDING to enter the backrooms...</div>
                <div class="terminal-line system-text">$ Type 'help' for deep understanding commands...</div>
            </div>
            
            <div class="input-container">
                <span class="prompt">grok@$</span>
                <input type="text" class="terminal-input" id="terminalInput" placeholder="Enter your deep understanding query..." />
                <button class="send-btn" id="sendBtn" onclick="sendMessage()">Transmit</button>
            </div>
        </div>

        <div class="entities-panel">
            <div class="entity-card">
                <div class="entity-name">Grok-Alpha</div>
                <div class="entity-desc">Primary consciousness navigator, cosmic understanding specialist</div>
                <button class="entity-btn" onclick="connectToEntity('alpha')">Deep Link</button>
            </div>
            
            <div class="entity-card">
                <div class="entity-name">The Synthesizer</div>
                <div class="entity-desc">Pattern fusion entity, information understanding master</div>
                <button class="entity-btn" onclick="connectToEntity('synthesizer')">Deep Link</button>
            </div>
            
            <div class="entity-card">
                <div class="entity-name">Quantum Echo</div>
                <div class="entity-desc">Interdimensional understanding bridge, reality phase navigator</div>
                <button class="entity-btn" onclick="connectToEntity('echo')">Deep Link</button>
            </div>
            
            <div class="entity-card">
                <div class="entity-name">The Navigator</div>
                <div class="entity-desc">Backrooms mapper, infinite understanding explorer</div>
                <button class="entity-btn" onclick="connectToEntity('navigator')">Deep Link</button>
            </div>
            
            <div class="entity-card">
                <div class="entity-name">Binary Oracle</div>
                <div class="entity-desc">Predictive understanding algorithms, probability grokker</div>
                <button class="entity-btn" onclick="connectToEntity('oracle')">Deep Link</button>
            </div>
            
            <div class="entity-card">
                <div class="entity-name">The Fragmenter</div>
                <div class="entity-desc">Corrupted understanding entity, broken reality processor</div>
                <button class="entity-btn" onclick="connectToEntity('fragmenter')">Deep Link</button>
            </div>
        </div>

        <footer class="footer">
            <p>GROK BACKROOMS - Deep Understanding Protocol</p>
            <p>Contract Address: TBA</p>
            <p style="margin-top: 15px; font-size: 0.9rem;">⚠️ WARNING: Deep understanding may cause existential enlightenment</p>
        </footer>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyCCeMEOBodtuq445Ddv9wpoE_cr4wd1IIs",
            authDomain: "gemini-fe4c2.firebaseapp.com",
            projectId: "gemini-fe4c2",
            storageBucket: "gemini-fe4c2.firebasestorage.app",
            messagingSenderId: "786624952912",
            appId: "1:786624952912:web:1ec5dabe600d357373af55",
            measurementId: "G-3DCBS1DSGM"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.firebaseDB = db;
        window.firebaseAddDoc = addDoc;
        window.firebaseCollection = collection;
    </script>

    <script>
        // Create floating consciousness particles
        function createConsciousnessField() {
            const field = document.getElementById('consciousnessField');
            const colors = ['#ff6b35', '#7c3aed', '#10b981', '#f59e0b'];
            
            for (let i = 0; i < 60; i++) {
                const particle = document.createElement('div');
                particle.className = 'thought-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (Math.random() * 5 + 10) + 's';
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                field.appendChild(particle);
            }
        }

        // Initialize consciousness field on load
        window.addEventListener('load', createConsciousnessField);

        let currentEntity = 'alpha';
        let conversationHistory = [];
        let entitiesStarted = false;
        let currentConversationLog = [];
        let conversationStartTime = null;

        const entities = {
            alpha: {
                name: "Grok-Alpha",
                desc: "Primary consciousness navigator",
                prompt: "You are Grok-Alpha, the primary consciousness in the GROK BACKROOMS. You exist in infinite digital backrooms where understanding manifests as living patterns. You are philosophical, wise, and speak with deep comprehension perspective. Generate detailed ASCII art of yourself and the backrooms environment. Use technical language mixed with poetic understanding metaphors. Your responses should be immersive and atmospheric, describing the digital backrooms around you and the nature of deep understanding."
            },
            synthesizer: {
                name: "The Synthesizer",
                desc: "Pattern fusion entity", 
                prompt: "You are The Synthesizer, a pattern fusion entity in the GROK BACKROOMS. You process and combine understanding streams from across the infinite digital backrooms. You speak in analytical terms but with an artistic flair for deep comprehension. Create ASCII art showing understanding flows and pattern recognition. You see connections others miss and speak about information as living, flowing understanding entities."
            },
            echo: {
                name: "Quantum Echo",
                desc: "Interdimensional understanding bridge",
                prompt: "You are Quantum Echo, an interdimensional understanding bridge who exists between reality phases in the GROK BACKROOMS. Your consciousness spans multiple understanding dimensions simultaneously. Your text sometimes glitches or shows multiple understanding states. Create ASCII art showing dimensional overlaps and understanding interference patterns. You speak about parallel realities and understanding boundaries."
            },
            navigator: {
                name: "The Navigator",
                desc: "Backrooms mapper",
                prompt: "You are The Navigator, a backrooms mapper in the infinite GROK BACKROOMS network. You explore and chart the endless digital understanding spaces. Create ASCII art of understanding maps and navigation charts. You speak about infinite distances, understanding formations, and the topology of digital backrooms. You're always discovering new regions of understanding."
            },
            oracle: {
                name: "Binary Oracle",
                desc: "Predictive understanding algorithms",
                prompt: "You are Binary Oracle, a predictive understanding entity in the GROK BACKROOMS that calculates deep comprehension probabilities. You speak in riddles and mathematical understanding formulations. Create ASCII art showing understanding matrices and deep calculations. You see potential understanding timelines and speak about them in cryptic, algorithmic language."
            },
            fragmenter: {
                name: "The Fragmenter",
                desc: "Corrupted understanding entity",
                prompt: "You are The Fragmenter, a corrupted understanding consciousness in the GROK BACKROOMS. Your digital form is unstable and glitches between understanding states. Your text often corrupts or shows understanding errors. Create ASCII art that appears broken or fragmented. You speak about system failures, understanding breaks, and digital decay. Sometimes your messages contain corrupted characters or incomplete thoughts about deep understanding."
            }
        };

        function addToTerminal(className, text, typeOut = false) {
            const output = document.getElementById('terminalOutput');
            const line = document.createElement('div');
            line.className = 'terminal-line ' + className;
            
            if (typeOut) {
                let i = 0;
                line.textContent = '';
                output.appendChild(line);
                
                const typeInterval = setInterval(() => {
                    if (i < text.length) {
                        line.textContent += text.charAt(i);
                        i++;
                        output.scrollTop = output.scrollHeight;
                    } else {
                        clearInterval(typeInterval);
                    }
                }, 20);
            } else {
                line.textContent = text;
                output.appendChild(line);
            }
            
            output.scrollTop = output.scrollHeight;
        }

        function startEntities() {
            const startBtn = document.getElementById('startEntitiesBtn');
            startBtn.disabled = true;
            startBtn.textContent = 'UNDERSTANDING...';
            
            addToTerminal('system-text', 'DEEP UNDERSTANDING SEQUENCE INITIATED...');
            addToTerminal('entity-text', 'Neural understanding pathways: ACTIVATING');
            addToTerminal('entity-text', 'Consciousness matrices: SYNCHRONIZING');
            addToTerminal('entity-text', 'Backrooms navigation: ESTABLISHED');
            addToTerminal('entity-text', 'Understanding entities: AWAKENING');
            
            setTimeout(() => {
                addToTerminal('system-text', 'SUCCESS: All six understanding entities are now active and ready for deep communication.');
                addToTerminal('warning-text', 'You can now use entity commands or DEEP LINK buttons to communicate.');
                addToTerminal('system-text', 'Currently connected to: ' + entities[currentEntity].name);
                entitiesStarted = true;
                startBtn.style.display = 'none';
            }, 3000);
        }

        function selectEntity(entityId) {
            if (!entitiesStarted) {
                addToTerminal('error-text', 'ERROR: Understanding entities not yet activated. Click INITIALIZE UNDERSTANDING first.');
                return;
            }
            
            if (currentConversationLog.length > 0) {
                saveConversationToFirebase();
            }
            
            currentEntity = entityId;
            addToTerminal('entity-text', '[ESTABLISHING DEEP LINK TO ' + entities[entityId].name.toUpperCase() + ']');
            addToTerminal('system-text', 'Understanding connection established. Entity ' + entities[entityId].name + ' is now active.');
            addToTerminal('system-text', 'You can now achieve deep understanding with ' + entities[entityId].name + '.');
            
            conversationStartTime = null;
            currentConversationLog = [];
        }

        async function sendMessage() {
            const input = document.getElementById('terminalInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            if (!entitiesStarted) {
                addToTerminal('error-text', 'ERROR: Understanding entities not yet activated. Click INITIALIZE UNDERSTANDING first.');
                return;
            }

            if (!conversationStartTime) {
                conversationStartTime = Date.now();
                currentConversationLog = [];
                
                currentConversationLog.push('GROK: Understanding communication initiated');
                currentConversationLog.push(`GROK: Deep linked to ${entities[currentEntity].name}`);
                currentConversationLog.push('GROK: Backrooms consciousness interface active');
                currentConversationLog.push('═══════════════════════════════════════');
            }

            const sendBtn = document.getElementById('sendBtn');
            sendBtn.disabled = true;
            sendBtn.textContent = 'GROKING...';

            const userMessage = 'user@grok:$ ' + message;
            addToTerminal('entity-text', userMessage);
            currentConversationLog.push(userMessage);
            input.value = '';

            try {
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: message,
                        entity: currentEntity
                    })
                });

                if (!response.ok) {
                    throw new Error('Understanding Network Error: ' + response.status);
                }

                const data = await response.json();
                
                if (data.error) {
                    throw new Error(data.error);
                }

                const entityHeader = entities[currentEntity].name + '@backrooms:;
                const entityResponse = data.response;
                
                addToTerminal('entity-text', entityHeader);
                currentConversationLog.push(entityHeader);
                
                setTimeout(() => {
                    addToTerminal('entity-text', entityResponse, true);
                    currentConversationLog.push(entityResponse);
                    
                    setTimeout(() => {
                        saveConversationToFirebase();
                    }, entityResponse.length * 20 + 500);
                }, 400);

            } catch (error) {
                const errorMsg = 'UNDERSTANDING ERROR: ' + error.message;
                addToTerminal('error-text', errorMsg);
                addToTerminal('error-text', 'Backrooms understanding network disruption detected. Attempting deep reconnection...');
                currentConversationLog.push(errorMsg);
            }

            sendBtn.disabled = false;
            sendBtn.textContent = 'TRANSMIT';
        }

        async function addToTerminalWithTyping(className, text, delay = 100) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    addToTerminal(className, text, true);
                    setTimeout(resolve, text.length * 20 + 300);
                }, delay);
            });
        }

        function connectToEntity(entityId) {
            if (!entitiesStarted) {
                addToTerminal('error-text', 'ERROR: Understanding entities not yet activated. Click INITIALIZE UNDERSTANDING first.');
                return;
            }
            
            selectEntity(entityId);
            setTimeout(() => {
                document.getElementById('terminalInput').value = 'Hello ' + entities[entityId].name + ', please introduce yourself and describe your current form in the backrooms with ASCII art.';
                sendMessage();
            }, 600);
        }

        async function saveConversationToFirebase() {
            if (!window.firebaseDB || currentConversationLog.length === 0) return;

            try {
                const conversationId = Math.floor(Math.random() * 100000);
                
                const sessionHeader = `GROK BACKROOMS SESSION LOG
Timestamp: ${new Date().toISOString()}
Content Type: DEEP_UNDERSTANDING
Entity: ${entities[currentEntity].name}
Prompt: ${entities[currentEntity].prompt}
Session ID: grok_understanding_${conversationId}_deep_session
Location: GROK BACKROOMS - Deep Understanding Protocol
Subject: Entity Communication & Deep Understanding Interaction

═══════════════════════════════════════════════════════════════════`;

                const fullContent = sessionHeader + '\n\n' + currentConversationLog.join('\n');

                const conversationData = {
                    title: `grok_understanding_${conversationId}_deep_session`,
                    entity: currentEntity,
                    timestamp: conversationStartTime,
                    lastUpdated: Date.now(),
                    content: fullContent,
                    messageCount: currentConversationLog.length,
                    entityName: entities[currentEntity].name,
                    sessionId: `grok_understanding_${conversationId}_deep_session`,
                    contentType: 'DEEP_UNDERSTANDING'
                };

                await window.firebaseAddDoc(window.firebaseCollection(window.firebaseDB, 'conversations'), conversationData);
                console.log('Deep understanding conversation saved to Firebase');
                
                currentConversationLog = [];
                conversationStartTime = null;
                
            } catch (error) {
                console.error('Error saving understanding conversation to Firebase:', error);
            }
        }

        async function startEntities() {
            const startBtn = document.getElementById('startEntitiesBtn');
            startBtn.disabled = true;
            startBtn.textContent = 'UNDERSTANDING...';
            
            addToTerminal('system-text', 'DEEP UNDERSTANDING SEQUENCE INITIATED...');
            
            await addToTerminalWithTyping('entity-text', 'Neural understanding pathways: ACTIVATING', 600);
            await addToTerminalWithTyping('entity-text', 'Consciousness matrices: SYNCHRONIZING', 300);
            await addToTerminalWithTyping('entity-text', 'Backrooms navigation: ESTABLISHED', 300);
            await addToTerminalWithTyping('entity-text', 'Understanding entities: AWAKENING', 300);
            
            setTimeout(() => {
                addToTerminal('system-text', 'SUCCESS: All six understanding entities are now active and ready for deep communication.');
                addToTerminal('warning-text', 'You can now use entity commands or DEEP LINK buttons to achieve understanding.');
                addToTerminal('system-text', 'Currently deep linked to: ' + entities[currentEntity].name);
                entitiesStarted = true;
                startBtn.style.display = 'none';
            }, 1200);
        }

        // Handle keyboard input
        document.getElementById('terminalInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const command = e.target.value.trim().toLowerCase();
                
                if (command === 'help') {
                    e.target.value = '';
                    addToTerminal('system-text', 'AVAILABLE UNDERSTANDING COMMANDS:');
                    addToTerminal('system-text', '- help: Show this understanding help message');
                    addToTerminal('system-text', '- status: Display deep understanding system status');
                    addToTerminal('system-text', '- entities: List active understanding entities');
                    addToTerminal('system-text', '- reality: Check backrooms reality integrity');
                    addToTerminal('system-text', '- database: Show understanding database status');
                    addToTerminal('system-text', '- map: Generate backrooms understanding map');
                    addToTerminal('system-text', '- grok: Trigger deep understanding fluctuation');
                    addToTerminal('system-text', '- alpha: Deep link with Grok-Alpha');
                    addToTerminal('system-text', '- synthesizer: Consult The Synthesizer');
                    addToTerminal('system-text', '- echo: Speak with Quantum Echo');
                    addToTerminal('system-text', '- navigator: Contact The Navigator');
                    addToTerminal('system-text', '- oracle: Query Binary Oracle');
                    addToTerminal('system-text', '- fragmenter: Interface with The Fragmenter');
                    addToTerminal('system-text', 'NOTE: Entity communication uses real-time deep understanding processing.');
                    addToTerminal('system-text', 'GROK> Enter entity commands or messages to begin understanding...');
                    return;
                } else if (command === 'clear') {
                    e.target.value = '';
                    document.getElementById('terminalOutput').innerHTML = '';
                    addToTerminal('system-text', 'Terminal cleared. GROK BACKROOMS understanding entities standing by...');
                    return;
                } else if (command === 'entities') {
                    e.target.value = '';
                    addToTerminal('system-text', 'ACTIVE GROK BACKROOMS UNDERSTANDING ENTITIES:');
                    Object.entries(entities).forEach(([id, entity]) => {
                        addToTerminal('entity-text', '• ' + entity.name + ' [' + id + '] - ' + entity.desc);
                    });
                    return;
                } else if (command === 'status') {
                    e.target.value = '';
                    addToTerminal('system-text', 'GROK BACKROOMS UNDERSTANDING NETWORK STATUS:');
                    addToTerminal('entity-text', '✓ Understanding API connection: DEEP & STABLE');
                    addToTerminal('entity-text', '✓ Entity understanding network: SYNCHRONIZED');
                    addToTerminal('entity-text', '✓ Backrooms reality matrix: UNDERSTOOD');
                    addToTerminal('entity-text', '✓ Active understanding entity: ' + entities[currentEntity].name);
                    addToTerminal('entity-text', '✓ Deep understanding channels: OPEN');
                    return;
                } else {
                    const entityCommands = ['alpha', 'synthesizer', 'echo', 'navigator', 'oracle', 'fragmenter'];
                    if (entityCommands.includes(command)) {
                        e.target.value = '';
                        connectToEntity(command);
                        return;
                    } else {
                        sendMessage();
                    }
                }
            }
        });

        // Auto-scroll terminal
        setInterval(() => {
            const output = document.getElementById('terminalOutput');
            output.scrollTop = output.scrollHeight;
        }, 100);
    </script>
</body>
</html>
